# Trae x è±†åŒ…ï¼šçµæ„Ÿæ¡¥æ¥å™¨ä½¿ç”¨è¯´æ˜ä¹¦

æœ¬æ–‡æ¡£å°†æŒ‡å¯¼ä½ å¦‚ä½•æ­å»ºå’Œä½¿ç”¨ Trae ä¸ è±†åŒ…/æµè§ˆå™¨ ä¹‹é—´çš„çµæ„Ÿæ¡¥æ¥å™¨ã€‚é€šè¿‡æ­¤å·¥å…·ï¼Œä½ å¯ä»¥å°†æµè§ˆå™¨ä¸­ï¼ˆå¦‚è±†åŒ…ç½‘é¡µç‰ˆï¼‰ç”Ÿæˆçš„æ€»ç»“å†…å®¹ä¸€é”®åŒæ­¥åˆ° Trae æœ¬åœ°ç¯å¢ƒã€‚

## ğŸŒŸ æ ¸å¿ƒæµç¨‹

1.  **æµè§ˆå™¨ç«¯**ï¼šåœ¨è±†åŒ…é¡µé¢ç”Ÿæˆå†…å®¹ -> ç‚¹å‡»æ‚¬æµ®çƒ -> å‘é€æ•°æ®ã€‚
2.  **æœåŠ¡ç«¯**ï¼šTrae æœ¬åœ° Server æ¥æ”¶æ•°æ® -> ä¿å­˜ä¸º Markdown æ–‡ä»¶ã€‚
3.  **å®¢æˆ·ç«¯**ï¼šTrae å†…ç½® Streamlit åº”ç”¨ -> å³æ—¶é¢„è§ˆä¸ç®¡ç†ç´ æã€‚

---

## ğŸ› ï¸ ç¯å¢ƒä¸å®‰è£…

### 1. å¯åŠ¨æœ¬åœ°æœåŠ¡

åœ¨ä½¿ç”¨å‰ï¼Œä½ éœ€è¦ç¡®ä¿ Trae çš„æœ¬åœ°æœåŠ¡å·²å¯åŠ¨ã€‚

**æ­¥éª¤ï¼š**
1.  åœ¨ Trae ä¸­æ‰“å¼€ç»ˆç«¯ã€‚
2.  è¿è¡Œ **Bridge Server** (ç”¨äºæ¥æ”¶æ•°æ®)ï¼š
    ```bash
    python server.py
    ```
    *æˆåŠŸæ ‡å¿—ï¼šçœ‹åˆ° `Uvicorn running on http://0.0.0.0:18000`*

3.  (å¯é€‰) è¿è¡Œ **Streamlit ç•Œé¢** (ç”¨äºæŸ¥çœ‹ç´ æ)ï¼š
    æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£ï¼Œè¿è¡Œï¼š
    ```bash
    streamlit run app.py --server.headless true --server.port 8502
    ```
    *æˆåŠŸæ ‡å¿—ï¼šçœ‹åˆ° `Local URL: http://localhost:8502`*

### 2. å®‰è£…æµè§ˆå™¨è„šæœ¬ (æ²¹çŒ´)

ä¸ºäº†åœ¨æµè§ˆå™¨ä¸­æ·»åŠ â€œå‘é€åˆ° Traeâ€çš„æŒ‰é’®ï¼Œä½ éœ€è¦å®‰è£…ç”¨æˆ·è„šæœ¬ã€‚

**å‰ç½®æ¡ä»¶ï¼š**
*   ä½ çš„æµè§ˆå™¨å·²å®‰è£… **Tampermonkey (æ²¹çŒ´)** æ‰©å±•ã€‚([Chromeå•†åº—é“¾æ¥](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo) | [Edgeå•†åº—é“¾æ¥](https://microsoftedge.microsoft.com/addons/detail/tampermonkey/iikmkjmpaadaobahmlepeloendndfphd))

**å®‰è£…æ­¥éª¤ï¼š**
1.  ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ çš„ Tampermonkey å›¾æ ‡ -> **æ·»åŠ æ–°è„šæœ¬**ã€‚
2.  åˆ é™¤ç¼–è¾‘å™¨ä¸­æ‰€æœ‰é»˜è®¤ä»£ç ã€‚
3.  å¤åˆ¶ä»¥ä¸‹ä»£ç å¹¶ç²˜è´´è¿›å»ï¼š

```javascript
// ==UserScript==
// @name         Trae-Doubao Bridge
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  å°†è±†åŒ…æµè§ˆå™¨çš„æ€»ç»“ä¸€é”®å‘é€åˆ° Trae æœ¬åœ°æœåŠ¡
// @author       Trae Assistant
// @match        *://*/*
// @grant        GM_xmlhttpRequest
// @grant        GM_setClipboard
// @grant        GM_notification
// @connect      localhost
// ==/UserScript==

(function() {
    'use strict';

    // é…ç½®ï¼šæŒ‡å‘ Trae æœ¬åœ°æœåŠ¡çš„ 18000 ç«¯å£
    const TRAE_SERVER_URL = "http://localhost:18000/api/clip";

    // åˆ›å»ºæ‚¬æµ®çƒ
    function createFloatingButton() {
        const btn = document.createElement('div');
        btn.id = 'trae-bridge-btn';
        btn.innerHTML = 'ğŸ’¾ Trae';
        btn.style.cssText = `
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: #6200ea;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 60px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            z-index: 999999;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            user-select: none;
        `;

        btn.onmouseover = () => btn.style.transform = 'scale(1.1)';
        btn.onmouseout = () => btn.style.transform = 'scale(1)';
        
        btn.onclick = async () => {
            btn.innerHTML = 'â³';
            try {
                // å°è¯•è·å–å‰ªè´´æ¿å†…å®¹
                let content = '';
                try {
                    content = await navigator.clipboard.readText();
                } catch (e) {
                    content = window.getSelection().toString();
                }

                if (!content || content.trim().length === 0) {
                    alert('è¯·å…ˆå¤åˆ¶æˆ–é€‰ä¸­è¦å‘é€çš„å†…å®¹ï¼');
                    btn.innerHTML = 'ğŸ’¾ Trae';
                    return;
                }

                // å‘é€åˆ° Trae Server
                GM_xmlhttpRequest({
                    method: "POST",
                    url: TRAE_SERVER_URL,
                    headers: { "Content-Type": "application/json" },
                    data: JSON.stringify({
                        title: document.title || "Doubao Clip",
                        url: window.location.href,
                        content: content
                    }),
                    onload: function(response) {
                        if (response.status === 200) {
                            btn.innerHTML = 'âœ…';
                            setTimeout(() => btn.innerHTML = 'ğŸ’¾ Trae', 2000);
                        } else {
                            console.error("Trae Bridge Error:", response);
                            btn.innerHTML = 'âŒ';
                            alert('å‘é€å¤±è´¥ï¼Œè¯·æ£€æŸ¥ Trae Server æ˜¯å¦è¿è¡Œ (localhost:18000)');
                        }
                    },
                    onerror: function(err) {
                        console.error("Trae Bridge Error:", err);
                        btn.innerHTML = 'âŒ';
                        alert('è¿æ¥å¤±è´¥ï¼Œè¯·ç¡®ä¿ Trae Server å·²å¯åŠ¨');
                    }
                });
            } catch (err) {
                console.error(err);
                btn.innerHTML = 'âŒ';
            }
        };
        document.body.appendChild(btn);
    }
    setTimeout(createFloatingButton, 1000);
})();
```

4.  æŒ‰ `Ctrl+S` ä¿å­˜è„šæœ¬ã€‚

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### åœºæ™¯ä¸€ï¼šä¿å­˜è±†åŒ…æ€»ç»“

1.  æ‰“å¼€ [è±†åŒ…ç½‘é¡µç‰ˆ](https://www.doubao.com) æˆ–ä»»æ„ä½¿ç”¨äº†è±†åŒ…æ’ä»¶çš„é¡µé¢ã€‚
2.  è®© AI æ€»ç»“ä¸€æ®µå†…å®¹ã€‚
3.  **é€‰ä¸­**æˆ–**å¤åˆ¶**ä½ è§‰å¾—æœ‰ä»·å€¼çš„æ€»ç»“æ–‡æœ¬ã€‚
4.  ç‚¹å‡»é¡µé¢å³ä¸‹è§’çš„ç´«è‰² **"ğŸ’¾ Trae"** æ‚¬æµ®çƒã€‚
5.  æŒ‰é’®å˜ä¸º âœ… è¡¨ç¤ºä¿å­˜æˆåŠŸã€‚

### åœºæ™¯äºŒï¼šåœ¨ Trae ä¸­æŸ¥çœ‹

1.  å›åˆ° Trae ç¼–è¾‘å™¨ã€‚
2.  æŸ¥çœ‹æ–‡ä»¶æ ‘ä¸­çš„ `materials/` ç›®å½•ï¼Œä½ ä¼šå‘ç°ä¸€ä¸ªæ–°çš„ `.md` æ–‡ä»¶ã€‚
3.  æˆ–è€…ï¼Œæ‰“å¼€ Streamlit ç•Œé¢ (http://localhost:8502)ï¼Œåœ¨å³ä¾§ **"Recent Clips"** åˆ—è¡¨ä¸­å³æ—¶æŸ¥çœ‹ã€‚

## â“ å¸¸è§é—®é¢˜

**Q: ç‚¹å‡»æŒ‰é’®æç¤ºâ€œè¿æ¥å¤±è´¥â€ï¼Ÿ**
A: è¯·æ£€æŸ¥ç»ˆç«¯ä¸­ `python server.py` æ˜¯å¦æ­£åœ¨è¿è¡Œï¼Œä¸”ç«¯å£å·æ˜¯å¦ä¸º `18000`ã€‚

**Q: ä¸ºä»€ä¹ˆæŒ‰é’®æ²¡å‡ºç°ï¼Ÿ**
A: è¯·åˆ·æ–°ç½‘é¡µã€‚å¦‚æœä»æœªå‡ºç°ï¼Œè¯·æ£€æŸ¥æ²¹çŒ´æ’ä»¶æ˜¯å¦å·²å¯ç”¨è¯¥è„šæœ¬ã€‚

**Q: ç«¯å£ 8502 è¢«å ç”¨äº†æ€ä¹ˆåŠï¼Ÿ**
A: å¯ä»¥åœ¨å¯åŠ¨ Streamlit æ—¶æŒ‡å®šå…¶ä»–ç«¯å£ï¼š`streamlit run app.py --server.port 8503`ã€‚
